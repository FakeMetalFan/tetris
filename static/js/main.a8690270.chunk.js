(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n(26)},,,,,function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(8),o=(n(15),function(e){var t=e.display,n=e.width;return c.a.createElement("div",{className:"display",style:{gridTemplateColumns:"repeat(".concat(n,", 1fr)")}},t.map((function(e){return e.map((function(e,t){return c.a.createElement(x,{key:t,tileFill:e})}))})))}),s=n(5),i=(n(21),function(){return c.a.createElement("footer",null,c.a.createElement("span",null,"Powered by",c.a.createElement("a",{href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer"},c.a.createElement(s.a,{icon:["fab","github"]})),"\xa9",c.a.createElement("span",null,(new Date).getFullYear())))}),u=(n(22),function(){return c.a.createElement("header",null,c.a.createElement("span",{className:"title"},"Tetris"),c.a.createElement("a",{href:"https://github.com/FakeMetalFan/tetris",target:"_blank",rel:"noopener noreferrer"},c.a.createElement(s.a,{icon:["fab","github"]})))}),f=n(2),l=function(e){var t=Object(r.useRef)(),n=Object(r.useRef)(!1);Object(r.useEffect)((function(){t.current=e}),[e]);for(var c=arguments.length,a=new Array(c>1?c-1:0),o=1;o<c;o++)a[o-1]=arguments[o];Object(r.useEffect)((function(){n.current?t.current():n.current=!0}),a)},d=n(3),b=37,m=38,h=39,j=40,w=0,O=1,E=2,v=3,p=4,A=5,g=6,k=7,y=[[[w,O,w,w],[w,O,w,w],[w,O,w,w],[w,O,w,w]],[[w,E,w],[w,E,w],[E,E,w]],[[w,v,w],[w,v,w],[w,v,v]],[[p,p],[p,p]],[[w,A,A],[A,A,w],[w,w,w]],[[w,g,w],[g,g,g],[w,w,w]],[[k,k,w],[w,k,k],[w,w,w]]],S=function(e){return e===w},R=function(e){return Object(d.a)(e,(function(t){t.forEach((function(n,r){t[r]=e.map((function(e){return e[r]}))})),t.map((function(e){return e.reverse()}))}))},F=function(e){var t=e.width,n=Object(r.useState)([]),c=Object(f.a)(n,2),a=c[0],o=c[1],s=Object(r.useState)({rowAddress:0,colAddress:0}),i=Object(f.a)(s,2),u=i[0],l=i[1];return{matrix:a,position:u,randomize:function(){var e=y[Math.random()*y.length|0];o(e),l({rowAddress:0,colAddress:(t-e.length)/2|0})},makeMove:function(e){var t=e.isRotation,n=e.offset;t?o(R(a)):l(Object(d.a)(u,(function(e){e.rowAddress+=n.rowAddress,e.colAddress+=n.colAddress})))}}},M=(n(23),function(e){var t=e.width,n=e.height,a=Object(r.useState)(0),s=Object(f.a)(a,2),i=s[0],u=s[1],O=Object(r.useState)(null),E=Object(f.a)(O,2),v=E[0],p=E[1],A=Object(r.useState)(!0),g=Object(f.a)(A,2),k=g[0],y=g[1],M=function(e){var t=e.width,n=e.height,c=e.move,a=Object(r.useMemo)((function(){return Array(t).fill(w)}),[t]),o=Object(r.useMemo)((function(){return Array(n).fill(a)}),[a,n]),s=Object(r.useState)(o),i=Object(f.a)(s,2),u=i[0],b=i[1],m=Object(r.useState)(o),h=Object(f.a)(m,2),j=h[0],O=h[1],E=Object(r.useState)(0),v=Object(f.a)(E,2),p=v[0],A=v[1],g=F({width:t}),k=g.matrix,y=g.position,M=g.randomize,x=g.makeMove,C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.tetrominoState,c=void 0===r?k:r,a=e.offset,o=void 0===a?{rowAddress:0,colAddress:0}:a;return c.some((function(e,r){return e.some((function(e,c){var a,s=r+y.rowAddress+o.rowAddress,i=c+y.colAddress+o.colAddress;return!S(e)&&(!S(null===(a=j[s])||void 0===a?void 0:a[i])||s>=n||i>=t||i<0)}))}))};return Object(r.useEffect)((function(){M()}),[j]),Object(r.useEffect)((function(){C()?(b(o),O(o),A(0)):b(Object(d.a)(j,(function(e){k.forEach((function(t,n){t.forEach((function(t,r){!S(t)&&(e[n+y.rowAddress][r+y.colAddress]=t)}))}))})))}),[k,y]),l((function(){var e=C(c.isRotation?{tetrominoState:R(k)}:c);if(e&&c.isDown){var t=u.reduce((function(e,t,n){return!t.some(S)&&e.push(n),e}),[]),n=t.length;n?(A(p+n),O(Object(d.a)(u,(function(e){t.forEach((function(t){e.splice(t,1),e.unshift(a)}))})))):O(u)}else e||x(c)}),c),{display:u,sweptRowsCount:p}}({width:t,height:n,move:v}),x=M.display,C=M.sweptRowsCount,D=Object(r.useRef)();return Object(r.useEffect)((function(){D.current.focus()}),[]),l((function(){u(C?i+10*C:0)}),C),function(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(t){var e=setInterval((function(){n.current()}),t);return function(){clearInterval(e)}}}),[t])}((function(){p({isDown:!0,offset:{rowAddress:1,colAddress:0}})}),k?800:null),c.a.createElement("div",{className:"tetris",tabIndex:"0",onKeyDown:function(e){var t=e.keyCode;t===b&&p({offset:{rowAddress:0,colAddress:-1}}),t===m&&p({isRotation:!0}),t===h&&p({offset:{rowAddress:0,colAddress:1}}),t===j&&(y(!1),p({isDown:!0,offset:{rowAddress:1,colAddress:0}}))},onKeyUp:function(e){e.keyCode===j&&y(!0)},ref:D},c.a.createElement("div",{className:"score"},i),c.a.createElement(o,{display:x,width:t}))}),x=(n(24),Object(r.memo)((function(e){var t=e.tileFill,n="tile tile__";switch(t){case w:n="tile";break;case O:n+="i";break;case E:n+="j";break;case v:n+="l";break;case p:n+="o";break;case A:n+="s";break;case g:n+="t";break;case k:n+="z";break;default:throw new Error('Unexpected tile of "'.concat(t,'"!'))}return c.a.createElement("div",{className:n})}))),C=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(u,null),c.a.createElement(M,{width:10,height:20}),c.a.createElement(i,null))},D=n(4),N=n(9);n(25);D.b.add(N.a),Object(a.render)(c.a.createElement(r.StrictMode,null,c.a.createElement(C,null)),document.getElementById("root"))}],[[10,1,2]]]);
//# sourceMappingURL=main.a8690270.chunk.js.map