(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{12:function(e,t,n){e.exports={footer:"footer_footer__2RxHW",link:"footer_link__2KGou"}},13:function(e,t,n){e.exports={header:"header_header__2l8_Z",link:"header_link__3G0Uu"}},19:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);n(19);var o,r=n(0),i=n(1),c=function(e){var t=e.count;return Object(i.jsx)("div",{children:t})},a=Object(r.memo)(c),u=n(9),s=n(12),f=n.n(s),l=function(){return Object(i.jsx)("footer",{className:f.a.footer,children:Object(i.jsxs)("span",{children:["Powered by",Object(i.jsx)("a",{className:f.a.link,href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer",children:Object(i.jsx)(u.a,{icon:["fab","github"]})}),"\xa9",Object(i.jsx)("span",{children:(new Date).getFullYear()})]})})},d=Object(r.memo)(l),j=n(13),b=n.n(j),v=function(){return Object(i.jsxs)("header",{className:b.a.header,children:["Tetris",Object(i.jsx)("a",{className:b.a.link,href:"https://github.com/FakeMetalFan/tetris",target:"_blank",rel:"noopener noreferrer",children:Object(i.jsx)(u.a,{icon:["fab","github"]})})]})},O=Object(r.memo)(v),h=n(3),m=n(15),x=n.n(m);!function(e){e[e.I=1]="I",e[e.J=2]="J",e[e.L=3]="L",e[e.O=4]="O",e[e.S=5]="S",e[e.T=6]="T",e[e.Z=7]="Z"}(o||(o={}));var _,w=o,I=n(5),p=n.n(I),g=function(e){var t,n=e.fill;return Object(i.jsx)("button",{type:"button","aria-label":"tile",className:x()(p.a.tile,(t={},Object(h.a)(t,p.a.i,n===w.I),Object(h.a)(t,p.a.j,n===w.J),Object(h.a)(t,p.a.l,n===w.L),Object(h.a)(t,p.a.o,n===w.O),Object(h.a)(t,p.a.s,n===w.S),Object(h.a)(t,p.a.t,n===w.T),Object(h.a)(t,p.a.z,n===w.Z),t))})},k=Object(r.memo)(g);!function(e){e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown"}(_||(_={}));var R,A=_;!function(e){e[e.Rotation=0]="Rotation",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Down=3]="Down"}(R||(R={}));var S=R,D=function(e){Object(r.useEffect)((function(){e()}),[])},L=n(4),E=n(6),M=n(14),y=n(18),J=function(e){return Object(M.a)(Object(M.a)({},e),{},{id:Object(y.a)()})},T=function(e){switch(e){case S.Rotation:return{isRotation:!0};case S.Left:return{offset:{rowIndex:0,columnIndex:-1}};case S.Right:return{offset:{rowIndex:0,columnIndex:1}};case S.Down:default:return{isDown:!0,offset:{rowIndex:1,columnIndex:0}}}},Z=function(e){return Object(E.a)(e,(function(t){t.forEach((function(n,o){t[o]=e.map((function(e){return e[o]}))})),t.map((function(e){return e.reverse()}))}))},N=function(e){for(var t=Object(r.useRef)(!1),n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];Object(r.useEffect)((function(){t.current?e():t.current=!0}),o)},F=function(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e})),Object(r.useEffect)((function(){if(t){var e=setInterval((function(){var e;null===(e=n.current)||void 0===e||e.call(n)}),t);return function(){clearInterval(e)}}}),[t])},z=[[[void 0,w.I,void 0,void 0],[void 0,w.I,void 0,void 0],[void 0,w.I,void 0,void 0],[void 0,w.I,void 0,void 0]],[[void 0,w.J,void 0],[void 0,w.J,void 0],[w.J,w.J,void 0]],[[void 0,w.L,void 0],[void 0,w.L,void 0],[void 0,w.L,w.L]],[[w.O,w.O],[w.O,w.O]],[[void 0,w.S,w.S],[w.S,w.S,void 0],[void 0,void 0,void 0]],[[void 0,w.T,void 0],[w.T,w.T,w.T],[void 0,void 0,void 0]],[[w.Z,w.Z,void 0],[void 0,w.Z,w.Z],[void 0,void 0,void 0]]],U=function(e){var t=e.width,n=Object(r.useState)([]),o=Object(L.a)(n,2),i=o[0],c=o[1],a=Object(r.useState)({rowIndex:0,columnIndex:0}),u=Object(L.a)(a,2),s=u[0],f=u[1];return{tetromino:i,position:s,randomize:function(){var e=z[Math.floor(Math.random()*z.length)];c(e),f({rowIndex:0,columnIndex:Math.floor((t-e.length)/2)})},makeMove:function(e){var t=e.isRotation,n=e.offset,o=void 0===n?{rowIndex:0,columnIndex:0}:n;t?c(Z(i)):f(Object(E.a)(s,(function(e){e.rowIndex+=o.rowIndex,e.columnIndex+=o.columnIndex})))}}},C=function(e){var t=e.width,n=e.height,o=Object(r.useMemo)((function(){return Array.from({length:n},(function(){return Array.from({length:t},(function(){return J({})}))}))}),[n,t]),i=Object(r.useState)(o),c=Object(L.a)(i,2),a=c[0],u=c[1],s=Object(r.useState)(o),f=Object(L.a)(s,2),l=f[0],d=f[1],j=Object(r.useState)(0),b=Object(L.a)(j,2),v=b[0],O=b[1],h=Object(r.useState)(0),m=Object(L.a)(h,2),x=m[0],_=m[1],w=Object(r.useState)({}),I=Object(L.a)(w,2),p=I[0],g=I[1],k=Object(r.useState)(!0),R=Object(L.a)(k,2),A=R[0],S=R[1],D=U(e),M=D.tetromino,y=D.position,z=D.randomize,C=D.makeMove,B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.matrix,r=void 0===o?M:o,i=e.offset,c=void 0===i?{rowIndex:0,columnIndex:0}:i;return r.some((function(e,o){return e.some((function(e,r){var i,a,u=o+y.rowIndex+c.rowIndex,s=r+y.columnIndex+c.columnIndex;return e&&((null===(i=l[u])||void 0===i||null===(a=i[s])||void 0===a?void 0:a.fill)||u>=n||s>=t||s<0)}))}))};return Object(r.useEffect)((function(){z()}),[l]),N((function(){B()?(u(o),d(o),O(0)):u(Object(E.a)(l,(function(e){M.forEach((function(t,n){t.forEach((function(t,o){t&&(e[n+y.rowIndex][o+y.columnIndex].fill=t)}))}))})))}),M,y),N((function(){var e=B(p.isRotation?{matrix:Z(M)}:p);if(e&&p.isDown){var t=a.reduce((function(e,t,n){return t.some((function(e){return!e.fill}))||e.push(n),e}),[]),n=t.length;n?(O(v+n),d(Object(E.a)(a,(function(e){t.forEach((function(t){for(var n=function(t){e[t].forEach((function(n,o){n.fill=e[t-1][o].fill}))},o=t;o;o-=1)n(o)}))})))):d(a)}else e||C(p)}),p),N((function(){_(v?x+10*v:0)}),v),F((function(){g(T())}),A?1e3:null),{tiles:a,score:x,setMove:g,setIsAutoDrop:S}},B=n(8),G=n.n(B),K=function(e){var t=e.width,n=Object(r.useRef)(null),o=C(e),c=o.tiles,u=o.score,s=o.setMove,f=o.setIsAutoDrop;return D((function(){var e;null===(e=n.current)||void 0===e||e.focus()})),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(O,{}),Object(i.jsx)("main",{children:Object(i.jsxs)("a",{href:"/","data-testid":G.a.tetris,className:G.a.tetris,ref:n,onClick:function(e){e.preventDefault()},onKeyDown:function(e){switch(e.keyCode){case A.ArrowUp:s(T(S.Rotation));break;case A.ArrowLeft:s(T(S.Left));break;case A.ArrowRight:s(T(S.Right));break;case A.ArrowDown:default:f(!1),s(T())}},onKeyUp:function(e){e.keyCode===A.ArrowDown&&f(!0)},children:[Object(i.jsx)("div",{className:G.a.score,children:Object(i.jsx)(a,{count:u})}),Object(i.jsx)("div",{"data-testid":G.a.tiles,className:G.a.tiles,style:{gridTemplateColumns:"repeat(".concat(t,", 1fr)")},children:c.map((function(e){return e.map((function(e){var t=e.fill,n=e.id;return Object(i.jsx)(k,{fill:t},n)}))}))})]})}),Object(i.jsx)(d,{})]})},W=function(){return Object(i.jsx)(K,{width:10,height:20})},q=n(16),H=n(7),P=n(17);(function(){H.b.add(P.a)})(),Object(q.render)(Object(i.jsx)(r.StrictMode,{children:Object(i.jsx)(W,{})}),document.getElementById("root"))},5:function(e,t,n){e.exports={tile:"tile_tile__3mwM6",i:"tile_i__25_aJ",j:"tile_j__TNRBZ",l:"tile_l__Zpgje",o:"tile_o__2wu3P",s:"tile_s__12WnI",t:"tile_t__2_6li",z:"tile_z__2vgfH"}},8:function(e,t,n){e.exports={tetris:"tetris_tetris__1xn-2",tiles:"tetris_tiles__QqxGq",score:"tetris_score__XB5WE"}}},[[30,1,2]]]);
//# sourceMappingURL=main.afb67a10.chunk.js.map