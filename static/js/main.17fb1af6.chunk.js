(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{184:function(e,t,n){},185:function(e,t,n){},186:function(e,t,n){},187:function(e,t,n){"use strict";n.r(t);var r,c=n(0),o=n.n(c),i=n(68),a=(n(78),function(e){var t=e.state,n=e.columnsCount;return o.a.createElement("div",{className:"display",style:{gridTemplateColumns:"repeat(".concat(n,", 1fr)")}},t.map((function(e,t){return e.map((function(e,r){return o.a.createElement(re,{key:r*n+t,state:e})}))})))}),u=n(27),s=(n(84),function(){return o.a.createElement("footer",null,o.a.createElement("span",null,"Powered by",o.a.createElement("a",{className:"icon",href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer"},o.a.createElement(u.a,{icon:["fab","github"]})),"\xa9",o.a.createElement("span",null,(new Date).getFullYear())))}),l=(n(85),function(){return o.a.createElement("header",null,o.a.createElement("span",{className:"title"},"Tetris"),o.a.createElement("a",{className:"icon",href:"https://github.com/FakeMetalFan/tetris",target:"_blank",rel:"noopener noreferrer"},o.a.createElement(u.a,{icon:["fab","github"]})))}),f=n(5),w=function(e){for(var t=Object(c.useRef)(!1),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];Object(c.useEffect)((function(){t.current?e():t.current=!0}),r)},d=n(7),b=n(69),h=n.n(b),p=n(16),m=n(15),O=n(4),v=n(6),j=n(188),g=37,y=38,E=39,k=40,A=1,C=2,M=3,R=4,x={colAddress:-1},_={colAddress:1},D={rowAddress:1},N={Clockwise:1,Counterclockwise:-1},S=0,F=1,I=2,P=3,z=4,J=5,K=6,T=7,U=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;Object(O.a)(this,e),this[d.b]=!0,this.fill=t}return Object(v.a)(e,[{key:"isEmpty",get:function(){return this.fill===S}}]),e}(),B=n(28),Y=n(70),q=n.n(Y),G=function(e,t,n){var r=n.value;return n.value=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return q()(r.apply(this,t))},n},H=(r=function(){function e(t){Object(O.a)(this,e),this.id=Object(j.a)(),this.position={rowAddress:0,colAddress:0},this.matrix=t}return Object(v.a)(e,[{key:"getCloned",value:function(e){return this.id=Object(j.a)(),this.position.colAddress=e,this}},{key:"getMoved",value:function(e){var t=e.rowAddress,n=void 0===t?0:t,r=e.colAddress,c=void 0===r?0:r;return this.position=Object(d.a)(this.position,(function(e){e.rowAddress+=n,e.colAddress+=c})),this}},{key:"getRotated",value:function(e){var t=this;return this.matrix=Object(d.a)(this.matrix,(function(n){n.forEach((function(e,r){n[r]=t.matrix.map((function(e){return e[r]}))})),e===N.Clockwise?n.map((function(e){return e.reverse()})):n.reverse()})),this}},{key:"width",get:function(){return this.matrix.length}},{key:"rowAddress",get:function(){return this.position.rowAddress}},{key:"colAddress",get:function(){return this.position.colAddress}}]),e}(),Object(B.a)(r.prototype,"getCloned",[G],Object.getOwnPropertyDescriptor(r.prototype,"getCloned"),r.prototype),Object(B.a)(r.prototype,"getMoved",[G],Object.getOwnPropertyDescriptor(r.prototype,"getMoved"),r.prototype),Object(B.a)(r.prototype,"getRotated",[G],Object.getOwnPropertyDescriptor(r.prototype,"getRotated"),r.prototype),r),L=[new H([[new U,new U(F),new U,new U],[new U,new U(F),new U,new U],[new U,new U(F),new U,new U],[new U,new U(F),new U,new U]]),new H([[new U,new U(I),new U],[new U,new U(I),new U],[new U(I),new U(I),new U]]),new H([[new U,new U(P),new U],[new U,new U(P),new U],[new U,new U(P),new U(P)]]),new H([[new U(z),new U(z)],[new U(z),new U(z)]]),new H([[new U,new U(J),new U(J)],[new U(J),new U(J),new U],[new U,new U,new U]]),new H([[new U,new U(K),new U],[new U(K),new U(K),new U(K)],[new U,new U,new U]]),new H([[new U(T),new U(T),new U],[new U,new U(T),new U(T)],[new U,new U,new U]])],Q=function(){function e(t){Object(O.a)(this,e),this._id=Object(j.a)(),this._code=t}return Object(v.a)(e,[{key:"isRotation",get:function(){return this._code===C}},{key:"isDown",get:function(){return this._code===R}}]),e}(),V=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this,A)).offset=x,e}return Object(v.a)(n,[{key:"getOppositeMove",value:function(){return new X}}]),n}(Q),W=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N.Clockwise;return Object(O.a)(this,n),(e=t.call(this,C)).direction=r,e}return Object(v.a)(n,[{key:"getOppositeMove",value:function(){return new n(N[this.direction===N.Clockwise?"Counterclockwise":"Clockwise"])}}]),n}(Q),X=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this,M)).offset=_,e}return Object(v.a)(n,[{key:"getOppositeMove",value:function(){return new V}}]),n}(Q),Z=function(e){Object(p.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this,R)).offset=D,e}return n}(Q),$=function(e){var t=Object(c.useRef)(e),n=Object(c.useCallback)((function(e){t.current=e}),[]);return[t.current,n]},ee=function(e){var t=e.width,n=function(){var e=L[Math.random()*L.length|0];return e.getCloned((t-e.width)/2|0)},r=Object(c.useState)((function(){return n()})),o=Object(f.a)(r,2),i=o[0],a=o[1];return{tetromino:i,randomize:function(){a(n())},makeMove:function(e){a(e.isRotation?i.getRotated(e.direction):i.getMoved(e.offset))}}},te=(n(184),function(){var e=Object(c.useState)(800),t=Object(f.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(0),u=Object(f.a)(i,2),s=u[0],l=u[1],b=Object(c.useState)(null),p=Object(f.a)(b,2),m=p[0],O=p[1],v=function(e){var t=e.width,n=e.height,r=e.move,o=Object(c.useMemo)((function(){return Array(t).fill(new U)}),[t]),i=Object(c.useMemo)((function(){return Array(n).fill(o)}),[o,n]),a=Object(c.useState)(i),u=Object(f.a)(a,2),s=u[0],l=u[1],b=Object(c.useState)(0),p=Object(f.a)(b,2),m=p[0],O=p[1],v=ee({width:t}),j=v.tetromino,g=v.randomize,y=v.makeMove,E=$(s),k=Object(f.a)(E,2),A=k[0],C=k[1],M=function(){return j.matrix.some((function(e,r){return e.some((function(e,c){var o,i,a=e.isEmpty,u=r+j.rowAddress,s=c+j.colAddress;return!a&&(!(null===(o=A[u])||void 0===o||null===(i=o[s])||void 0===i?void 0:i.isEmpty)||u>=n||s>=t||s<0)}))}))};return Object(c.useEffect)((function(){M()?r.isDown?C(s):y(r.getOppositeMove()):l(Object(d.a)(A,(function(e){j.matrix.forEach((function(t,n){t.forEach((function(t,r){!t.isEmpty&&(e[n+j.rowAddress][r+j.colAddress]=t)}))}))})))}),[j.matrix,j.position]),w((function(){y(r)}),r),w((function(){g();var e=A.reduce((function(e,t,n){return!h()(t,"isEmpty")&&e.push(n),e}),[]);e.length&&(C(Object(d.a)(A,(function(t){e.forEach((function(e){t.splice(e,1),t.unshift(o)}))}))),O((function(t){return t+e.length})))}),A),w((function(){M()&&(l(i),C(i),O(0))}),j.id),{display:s,sweptRowsCount:m}}({width:10,move:m,height:20}),j=v.display,A=v.sweptRowsCount,C=Object(c.useRef)(),M=function(){O(new Z)};return Object(c.useEffect)((function(){C.current.focus()}),[]),w((function(){l((function(e){return A?e+10*A:0}))}),A),function(e,t){var n=Object(c.useRef)();Object(c.useEffect)((function(){n.current=e}),[e]),Object(c.useEffect)((function(){if(t){var e=setInterval((function(){n.current()}),t);return function(){clearInterval(e)}}}),[t])}((function(){M()}),n),o.a.createElement("div",{className:"tetris",tabIndex:"0",onKeyDown:function(e){var t=e.keyCode;t===g&&O(new V),t===y&&O(new W),t===E&&O(new X),t===k&&(r(null),M())},onKeyUp:function(e){e.keyCode===k&&r(800)},ref:C},o.a.createElement("div",{className:"score"},s),o.a.createElement(a,{state:j,columnsCount:10}))}),ne=function(e){var t="tile tile__";switch(e){case S:return"".concat(t,"none");case F:return"".concat(t,"i");case I:return"".concat(t,"j");case P:return"".concat(t,"l");case z:return"".concat(t,"o");case J:return"".concat(t,"s");case K:return"".concat(t,"t");case T:return"".concat(t,"z");default:throw new Error('Unexpected tile fill of "'.concat(e,'"!'))}},re=(n(185),Object(c.memo)((function(e){var t=e.state;return o.a.createElement("div",{className:ne(t.fill)})}))),ce=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(l,null),o.a.createElement(te,null),o.a.createElement(s,null))},oe=n(14),ie=n(71);n(186);oe.b.add(ie.a),Object(i.render)(o.a.createElement(c.StrictMode,null,o.a.createElement(ce,null)),document.getElementById("root"))},73:function(e,t,n){e.exports=n(187)},78:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){}},[[73,1,2]]]);
//# sourceMappingURL=main.17fb1af6.chunk.js.map