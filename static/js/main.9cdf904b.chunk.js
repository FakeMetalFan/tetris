(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{10:function(t,e,n){t.exports={tetris:"tetris_tetris__1xn-2",tiles:"tetris_tiles__QqxGq",score:"tetris_score__XB5WE"}},13:function(t,e,n){t.exports={footer:"footer_footer__2RxHW",link:"footer_link__2KGou"}},21:function(t,e,n){},32:function(t,e,n){"use strict";n.r(e);n(21);var r,o=n(0),i=n.n(o),c=n(1),a=function(t){var e=t.count;return Object(c.jsx)(c.Fragment,{children:e})},u=Object(o.memo)(a),s=n(8),f=n(13),l=n.n(f),m=function(){return Object(c.jsx)("footer",{className:l.a.footer,children:Object(c.jsxs)("span",{children:["Powered by",Object(c.jsx)("a",{className:l.a.link,href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer",children:Object(c.jsx)(s.a,{icon:["fab","github"]})}),"\xa9",Object(c.jsx)("span",{children:(new Date).getFullYear()})]})})},j=Object(o.memo)(m),b=n(9),p=n.n(b),d=function(){return Object(c.jsxs)("header",{className:p.a.header,children:[Object(c.jsx)("span",{className:p.a.title,children:"Tetris"}),Object(c.jsx)("a",{className:p.a.link,href:"https://github.com/FakeMetalFan/tetris",target:"_blank",rel:"noopener noreferrer",children:Object(c.jsx)(s.a,{icon:["fab","github"]})})]})},O=Object(o.memo)(d),h=n(3),y=n(15),E=n.n(y),x=n(16),w=n(17);!function(t){t[t.Empty=0]="Empty",t[t.I=1]="I",t[t.J=2]="J",t[t.L=3]="L",t[t.O=4]="O",t[t.S=5]="S",t[t.T=6]="T",t[t.Z=7]="Z"}(r||(r={}));var _,v=r,I=function(){function t(e){Object(x.a)(this,t),this.fill=e}return Object(w.a)(t,[{key:"isEmpty",get:function(){return this.fill===v.Empty}},{key:"isI",get:function(){return this.fill===v.I}},{key:"isJ",get:function(){return this.fill===v.J}},{key:"isL",get:function(){return this.fill===v.L}},{key:"isO",get:function(){return this.fill===v.O}},{key:"isS",get:function(){return this.fill===v.S}},{key:"isT",get:function(){return this.fill===v.T}},{key:"isZ",get:function(){return this.fill===v.Z}}]),t}(),g=n(5),k=n.n(g),R=function(t){var e,n=t.fill,r=new I(n),o=r.isI,i=r.isJ,a=r.isL,u=r.isO,s=r.isS,f=r.isT,l=r.isZ;return Object(c.jsx)("div",{className:E()(k.a.tile,(e={},Object(h.a)(e,k.a.i,o),Object(h.a)(e,k.a.j,i),Object(h.a)(e,k.a.l,a),Object(h.a)(e,k.a.o,u),Object(h.a)(e,k.a.s,s),Object(h.a)(e,k.a.t,f),Object(h.a)(e,k.a.z,l),e))})},A=Object(o.memo)(R);!function(t){t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowRight=39]="ArrowRight",t[t.ArrowDown=40]="ArrowDown"}(_||(_={}));var S,L=_;!function(t){t[t.Rotation=0]="Rotation",t[t.Left=1]="Left",t[t.Right=2]="Right",t[t.Down=3]="Down"}(S||(S={}));var D=S,J=function(t){Object(o.useEffect)((function(){t()}),[])},M=n(4),T=n(6),Z=n(14),N=n(20),F=function(t){return Object(Z.a)(Object(Z.a)({},t),{},{id:Object(N.a)()})},z=function(t){switch(t){case D.Rotation:return{isRotation:!0};case D.Left:return{offset:{rowIndex:0,columnIndex:-1}};case D.Right:return{offset:{rowIndex:0,columnIndex:1}};case D.Down:default:return{isDown:!0,offset:{rowIndex:1,columnIndex:0}}}},U=function(t){return Object(T.a)(t,(function(e){e.forEach((function(n,r){e[r]=t.map((function(t){return t[r]}))})),e.map((function(t){return t.reverse()}))}))},C=function(t){for(var e=Object(o.useRef)(!1),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Object(o.useEffect)((function(){e.current?t():e.current=!0}),r)},B=function(t,e){var n=Object(o.useRef)();Object(o.useEffect)((function(){n.current=t})),Object(o.useEffect)((function(){if(e){var t=setInterval((function(){var t;null===(t=n.current)||void 0===t||t.call(n)}),e);return function(){clearInterval(t)}}}),[e])},G=[[[v.Empty,v.I,v.Empty,v.Empty],[v.Empty,v.I,v.Empty,v.Empty],[v.Empty,v.I,v.Empty,v.Empty],[v.Empty,v.I,v.Empty,v.Empty]],[[v.Empty,v.J,v.Empty],[v.Empty,v.J,v.Empty],[v.J,v.J,v.Empty]],[[v.Empty,v.L,v.Empty],[v.Empty,v.L,v.Empty],[v.Empty,v.L,v.L]],[[v.O,v.O],[v.O,v.O]],[[v.Empty,v.S,v.S],[v.S,v.S,v.Empty],[v.Empty,v.Empty,v.Empty]],[[v.Empty,v.T,v.Empty],[v.T,v.T,v.T],[v.Empty,v.Empty,v.Empty]],[[v.Z,v.Z,v.Empty],[v.Empty,v.Z,v.Z],[v.Empty,v.Empty,v.Empty]]],K=function(t){var e=t.width,n=Object(o.useState)([]),r=Object(M.a)(n,2),i=r[0],c=r[1],a=Object(o.useState)({rowIndex:0,columnIndex:0}),u=Object(M.a)(a,2),s=u[0],f=u[1];return{tetromino:i,position:s,randomize:function(){var t=G[Math.floor(Math.random()*G.length)];c(t),f({rowIndex:0,columnIndex:Math.floor((e-t.length)/2)})},makeMove:function(t){var e=t.isRotation,n=t.offset,r=void 0===n?{rowIndex:0,columnIndex:0}:n;e?c(U(i)):f(Object(T.a)(s,(function(t){t.rowIndex+=r.rowIndex,t.columnIndex+=r.columnIndex})))}}},W=function(t){var e=t.width,n=t.height,r=Object(o.useMemo)((function(){return Array.from({length:n},(function(){return Array.from({length:e},(function(){return F({fill:v.Empty})}))}))}),[n,e]),i=Object(o.useState)(r),c=Object(M.a)(i,2),a=c[0],u=c[1],s=Object(o.useState)(r),f=Object(M.a)(s,2),l=f[0],m=f[1],j=Object(o.useState)(0),b=Object(M.a)(j,2),p=b[0],d=b[1],O=Object(o.useState)(0),h=Object(M.a)(O,2),y=h[0],E=h[1],x=Object(o.useState)({}),w=Object(M.a)(x,2),_=w[0],g=w[1],k=Object(o.useState)(!0),R=Object(M.a)(k,2),A=R[0],S=R[1],L=K(t),D=L.tetromino,J=L.position,Z=L.randomize,N=L.makeMove,G=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.matrix,o=void 0===r?D:r,i=t.offset,c=void 0===i?{rowIndex:0,columnIndex:0}:i;return o.some((function(t,r){return t.some((function(t,o){var i,a,u=r+J.rowIndex+c.rowIndex,s=o+J.columnIndex+c.columnIndex;return!new I(t).isEmpty&&(!new I(null===(i=l[u])||void 0===i||null===(a=i[s])||void 0===a?void 0:a.fill).isEmpty||u>=n||s>=e||s<0)}))}))};return Object(o.useEffect)((function(){Z()}),[l]),C((function(){G()?(u(r),m(r),d(0)):u(Object(T.a)(l,(function(t){D.forEach((function(e,n){e.forEach((function(e,r){new I(e).isEmpty||(t[n+J.rowIndex][r+J.columnIndex].fill=e)}))}))})))}),D,J),C((function(){var t=G(_.isRotation?{matrix:U(D)}:_);if(t&&_.isDown){var e=a.reduce((function(t,e,n){return e.some((function(t){return new I(t.fill).isEmpty}))||t.push(n),t}),[]),n=e.length;n?(d(p+n),m(Object(T.a)(a,(function(t){e.forEach((function(e){for(var n=function(e){t[e].forEach((function(n,r){n.fill=t[e-1][r].fill}))},r=e;r;r-=1)n(r)}))})))):m(a)}else t||N(_)}),_),C((function(){E(p?y+10*p:0)}),p),B((function(){g(z())}),A?1e3:null),{tiles:a,score:y,setMove:g,setIsAutoDrop:S}},q=n(10),H=n.n(q),P=function(t){var e=t.width,n=Object(o.useRef)(null),r=W(t),i=r.tiles,a=r.score,s=r.setMove,f=r.setIsAutoDrop;return J((function(){var t;null===(t=n.current)||void 0===t||t.focus()})),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(O,{}),Object(c.jsx)("main",{children:Object(c.jsxs)("a",{href:"/",className:H.a.tetris,ref:n,onClick:function(t){t.preventDefault()},onKeyDown:function(t){switch(t.keyCode){case L.ArrowUp:s(z(D.Rotation));break;case L.ArrowLeft:s(z(D.Left));break;case L.ArrowRight:s(z(D.Right));break;case L.ArrowDown:default:f(!1),s(z())}},onKeyUp:function(t){t.keyCode===L.ArrowDown&&f(!0)},children:[Object(c.jsx)("div",{className:H.a.score,children:Object(c.jsx)(u,{count:a})}),Object(c.jsx)("div",{className:H.a.tiles,style:{gridTemplateColumns:"repeat(".concat(e,", 1fr)")},children:i.map((function(t){return t.map((function(t){var e=t.fill,n=t.id;return Object(c.jsx)(A,{fill:e},n)}))}))})]})}),Object(c.jsx)(j,{})]})},Q=function(){return Object(c.jsx)(P,{width:10,height:20})},X=n(18),Y=n(7),V=n(19);(function(){Y.b.add(V.a)})(),Object(X.render)(Object(c.jsx)(i.a.StrictMode,{children:Object(c.jsx)(Q,{})}),document.getElementById("root"))},5:function(t,e,n){t.exports={tile:"tile_tile__3mwM6",i:"tile_i__25_aJ",j:"tile_j__TNRBZ",l:"tile_l__Zpgje",o:"tile_o__2wu3P",s:"tile_s__12WnI",t:"tile_t__2_6li",z:"tile_z__2vgfH"}},9:function(t,e,n){t.exports={header:"header_header__2l8_Z",link:"header_link__3G0Uu"}}},[[32,1,2]]]);
//# sourceMappingURL=main.9cdf904b.chunk.js.map