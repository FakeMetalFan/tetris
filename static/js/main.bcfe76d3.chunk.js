(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{12:function(e,t,n){e.exports={footer:"footer_footer__2RxHW",link:"footer_link__2KGou"}},13:function(e,t,n){e.exports={header:"header_header__2l8_Z",link:"header_link__3G0Uu"}},14:function(e,t,n){e.exports={tiles:"tiles_tiles__1LOVM"}},20:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);n(20);var o,r=n(8),i=n(12),c=n.n(i),a=n(1),u=function(){return Object(a.jsx)("footer",{className:c.a.footer,children:Object(a.jsxs)("span",{children:["Powered by",Object(a.jsx)("a",{className:c.a.link,href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer",children:Object(a.jsx)(r.a,{icon:["fab","github"]})}),"\xa9",Object(a.jsx)("span",{children:(new Date).getFullYear()})]})})},s=n(13),f=n.n(s),l=function(){return Object(a.jsxs)("header",{className:f.a.header,children:["Tetris",Object(a.jsx)("a",{className:f.a.link,href:"https://github.com/FakeMetalFan/tetris",target:"_blank",rel:"noopener noreferrer",children:Object(a.jsx)(r.a,{icon:["fab","github"]})})]})},d=n(0),j=function(e){var t=e.className,n=e.count;return Object(a.jsx)("div",{className:t,children:n})},v=Object(d.memo)(j),b=n(3),O=n(16),h=n.n(O);!function(e){e[e.I=1]="I",e[e.J=2]="J",e[e.L=3]="L",e[e.O=4]="O",e[e.S=5]="S",e[e.T=6]="T",e[e.Z=7]="Z"}(o||(o={}));var m,x=o,w=n(5),_=n.n(w),I=function(e){var t,n=e.fill,o=h()(_.a.tile,(t={},Object(b.a)(t,_.a.i,n===x.I),Object(b.a)(t,_.a.j,n===x.J),Object(b.a)(t,_.a.l,n===x.L),Object(b.a)(t,_.a.o,n===x.O),Object(b.a)(t,_.a.s,n===x.S),Object(b.a)(t,_.a.t,n===x.T),Object(b.a)(t,_.a.z,n===x.Z),t));return Object(a.jsx)("button",{type:"button","aria-label":"tile",className:o})},p=Object(d.memo)(I),g=n(14),k=n.n(g),R=function(e){var t=e.width,n=e.tiles,o={gridTemplateColumns:"repeat(".concat(t,", 1fr)")};return Object(a.jsx)("div",{"data-testid":k.a.tiles,className:k.a.tiles,style:o,children:n.map((function(e){return e.map((function(e){var t=e.fill,n=e.id;return Object(a.jsx)(p,{fill:t},n)}))}))})};!function(e){e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown"}(m||(m={}));var A,S=m;!function(e){e[e.Rotation=0]="Rotation",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.Down=3]="Down"}(A||(A={}));var L=A,D=function(e){Object(d.useEffect)(e,[])},M=n(4),E=n(6),y=n(15),N=n(19),J=function(e){return Object(y.a)(Object(y.a)({},e),{},{id:Object(N.a)()})},T=function(e){switch(e){case L.Rotation:return{isRotation:!0};case L.Left:return{offset:{rowIndex:0,columnIndex:-1}};case L.Right:return{offset:{rowIndex:0,columnIndex:1}};case L.Down:default:return{isDown:!0,offset:{rowIndex:1,columnIndex:0}}}},Z=function(e){return Object(E.a)(e,(function(t){t.forEach((function(n,o){t[o]=e.map((function(e){return e[o]}))})),t.map((function(e){return e.reverse()}))}))},z=function(e){for(var t=Object(d.useRef)(!1),n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];Object(d.useEffect)((function(){t.current?e():t.current=!0}),o)},F=function(e,t){var n=Object(d.useRef)();Object(d.useEffect)((function(){n.current=e})),Object(d.useEffect)((function(){if(t){var e=setInterval((function(){var e;null===(e=n.current)||void 0===e||e.call(n)}),t);return function(){clearInterval(e)}}}),[t])},U=[[[void 0,x.I,void 0,void 0],[void 0,x.I,void 0,void 0],[void 0,x.I,void 0,void 0],[void 0,x.I,void 0,void 0]],[[void 0,x.J,void 0],[void 0,x.J,void 0],[x.J,x.J,void 0]],[[void 0,x.L,void 0],[void 0,x.L,void 0],[void 0,x.L,x.L]],[[x.O,x.O],[x.O,x.O]],[[void 0,x.S,x.S],[x.S,x.S,void 0],[void 0,void 0,void 0]],[[void 0,x.T,void 0],[x.T,x.T,x.T],[void 0,void 0,void 0]],[[x.Z,x.Z,void 0],[void 0,x.Z,x.Z],[void 0,void 0,void 0]]],C=function(e){var t=e.width,n=Object(d.useState)([]),o=Object(M.a)(n,2),r=o[0],i=o[1],c=Object(d.useState)({rowIndex:0,columnIndex:0}),a=Object(M.a)(c,2),u=a[0],s=a[1];return{tetromino:r,position:u,randomize:function(){var e=U[Math.floor(Math.random()*U.length)];i(e),s({rowIndex:0,columnIndex:Math.floor((t-e.length)/2)})},makeMove:function(e){var t=e.isRotation,n=e.offset,o=void 0===n?{rowIndex:0,columnIndex:0}:n;t?i(Z(r)):s(Object(E.a)(u,(function(e){e.rowIndex+=o.rowIndex,e.columnIndex+=o.columnIndex})))}}},B=function(e){var t=e.width,n=e.height,o=Object(d.useMemo)((function(){return Array.from({length:n},(function(){return Array.from({length:t},(function(){return J({})}))}))}),[n,t]),r=Object(d.useState)(o),i=Object(M.a)(r,2),c=i[0],a=i[1],u=Object(d.useState)(o),s=Object(M.a)(u,2),f=s[0],l=s[1],j=Object(d.useState)(0),v=Object(M.a)(j,2),b=v[0],O=v[1],h=Object(d.useState)(0),m=Object(M.a)(h,2),x=m[0],w=m[1],_=Object(d.useState)({}),I=Object(M.a)(_,2),p=I[0],g=I[1],k=Object(d.useState)(!0),R=Object(M.a)(k,2),A=R[0],S=R[1],L=C(e),D=L.tetromino,y=L.position,N=L.randomize,U=L.makeMove,B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.matrix,r=void 0===o?D:o,i=e.offset,c=void 0===i?{rowIndex:0,columnIndex:0}:i;return r.some((function(e,o){return e.some((function(e,r){var i,a,u=o+y.rowIndex+c.rowIndex,s=r+y.columnIndex+c.columnIndex;return e&&((null===(i=f[u])||void 0===i||null===(a=i[s])||void 0===a?void 0:a.fill)||u>=n||s>=t||s<0)}))}))};return Object(d.useEffect)(N,[f]),z((function(){B()?(a(o),l(o),O(0)):a(Object(E.a)(f,(function(e){D.forEach((function(t,n){t.forEach((function(t,o){t&&(e[n+y.rowIndex][o+y.columnIndex].fill=t)}))}))})))}),D,y),z((function(){var e=B(p.isRotation?{matrix:Z(D)}:p);if(e&&p.isDown){var t=c.reduce((function(e,t,n){return t.some((function(e){return!e.fill}))||e.push(n),e}),[]),n=t.length;n?(O(b+n),l(Object(E.a)(c,(function(e){t.forEach((function(t){for(var n=function(t){e[t].forEach((function(n,o){n.fill=e[t-1][o].fill}))},o=t;o;o-=1)n(o)}))})))):l(c)}else e||U(p)}),p),z((function(){w(b?x+10*b:0)}),b),F((function(){g(T())}),A?1e3:null),{tiles:c,score:x,setMove:g,setIsAutoDrop:S}},K=n(9),W=n.n(K),G=function(e){var t=e.width,n=Object(d.useRef)(null),o=B(e),r=o.tiles,i=o.score,c=o.setMove,u=o.setIsAutoDrop;return D((function(){var e;null===(e=n.current)||void 0===e||e.focus()})),Object(a.jsxs)("a",{href:"/","data-testid":W.a.tetris,className:W.a.tetris,ref:n,onClick:function(e){e.preventDefault()},onKeyDown:function(e){switch(e.keyCode){case S.ArrowUp:c(T(L.Rotation));break;case S.ArrowLeft:c(T(L.Left));break;case S.ArrowRight:c(T(L.Right));break;case S.ArrowDown:default:u(!1),c(T())}},onKeyUp:function(e){e.keyCode===S.ArrowDown&&u(!0)},children:[Object(a.jsx)(v,{className:W.a.score,count:i}),Object(a.jsx)(R,{width:t,tiles:r})]})},H=n(17),P=n(7),V=n(18);(function(){P.b.add(V.a)})(),Object(H.render)(Object(a.jsxs)(d.StrictMode,{children:[Object(a.jsx)(l,{}),Object(a.jsx)(G,{width:10,height:20}),Object(a.jsx)(u,{})]}),document.getElementById("root"))},5:function(e,t,n){e.exports={tile:"tile_tile__3mwM6",i:"tile_i__25_aJ",j:"tile_j__TNRBZ",l:"tile_l__Zpgje",o:"tile_o__2wu3P",s:"tile_s__12WnI",t:"tile_t__2_6li",z:"tile_z__2vgfH"}},9:function(e,t,n){e.exports={tetris:"tetris_tetris__1xn-2",score:"tetris_score__XB5WE"}}},[[31,1,2]]]);
//# sourceMappingURL=main.bcfe76d3.chunk.js.map