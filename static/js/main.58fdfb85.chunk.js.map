{"version":3,"sources":["components/Footer/footer.module.scss","components/Header/header.module.scss","components/Tiles/tiles.module.scss","constants/tileFill.ts","components/Counter/index.tsx","components/Footer/index.tsx","components/Header/index.tsx","constants/keyCode.ts","components/Tile/index.tsx","components/Tiles/index.tsx","constants/moveCode.ts","hooks/useDidMount.ts","utils/addId.ts","utils/createMove.ts","utils/rotateMatrix.ts","hooks/useDidUpdate.ts","hooks/useInterval.ts","constants/tetrominos.ts","hooks/useTetromino.ts","hooks/useTetris.ts","containers/Tetris/index.tsx","setupIcons.ts","index.tsx","components/Tile/tile.module.scss","containers/Tetris/tetris.module.scss"],"names":["module","exports","TileFill","Counter","className","count","memo","Footer","styles","footer","link","href","target","rel","icon","Date","getFullYear","Header","header","KeyCode","Tile","fill","type","aria-label","classNames","tile","i","I","j","J","l","L","o","O","s","S","t","T","z","Z","Tiles","width","tiles","data-testid","style","gridTemplateColumns","map","row","id","MoveCode","useDidMount","callback","useEffect","addId","item","nanoid","createMove","code","Rotation","isRotation","Left","offset","rowIndex","columnIndex","Right","Down","isDown","rotateMatrix","matrix","produce","draft","forEach","_","index","reverse","useDidUpdate","didMount","useRef","deps","current","useInterval","interval","callbackRef","intervalId","setInterval","call","clearInterval","tetrominos","undefined","useTetromino","useState","tetromino","setTetromino","position","setPosition","randomize","randomTetromino","Math","floor","random","length","makeMove","useTetris","params","height","emptyTiles","useMemo","Array","from","setTiles","mergedTiles","setMergedTiles","clearedRowsCount","setClearedRowsCount","score","setScore","move","setMove","isAutoDrop","setIsAutoDrop","willTetrominoCollide","some","rowIndexAhead","columnIndexAhead","willCollide","filledRowsIndexes","reduce","indexes","push","Tetris","containerRef","focus","tetris","ref","onClick","event","preventDefault","onKeyDown","keyCode","ArrowUp","ArrowLeft","ArrowRight","ArrowDown","onKeyUp","library","add","faGithub","setupIcons","render","document","getElementById"],"mappings":"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","file":"static/js/main.58fdfb85.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"footer_footer__2RxHW\",\"link\":\"footer_link__2KGou\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header_header__2l8_Z\",\"link\":\"header_link__3G0Uu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tiles\":\"tiles_tiles__1LOVM\"};","// eslint-disable-next-line no-shadow\nenum TileFill {\n  I = 1,\n  J,\n  L,\n  O,\n  S,\n  T,\n  Z,\n}\n\nexport default TileFill;\n","import { memo } from 'react';\n\ninterface Props {\n  className?: string;\n  count: number;\n}\n\nconst Counter = ({ className, count }: Props) => (\n  <div className={className}>{count}</div>\n);\n\nexport default memo(Counter);\n","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { memo } from 'react';\n\nimport styles from './footer.module.scss';\n\nconst Footer = () => (\n  <footer className={styles.footer}>\n    <span>\n      Powered by\n      <a\n        className={styles.link}\n        href=\"https://github.com/FakeMetalFan\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        <FontAwesomeIcon icon={['fab', 'github']} />\n      </a>\n      &copy;\n      <span>{new Date().getFullYear()}</span>\n    </span>\n  </footer>\n);\n\nexport default memo(Footer);\n","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { memo } from 'react';\n\nimport styles from './header.module.scss';\n\nconst Header = () => (\n  <header className={styles.header}>\n    Tetris\n    <a\n      className={styles.link}\n      href=\"https://github.com/FakeMetalFan/tetris\"\n      target=\"_blank\"\n      rel=\"noopener noreferrer\"\n    >\n      <FontAwesomeIcon icon={['fab', 'github']} />\n    </a>\n  </header>\n);\n\nexport default memo(Header);\n","// eslint-disable-next-line no-shadow\nenum KeyCode {\n  ArrowLeft = 37,\n  ArrowUp = 38,\n  ArrowRight = 39,\n  ArrowDown = 40,\n}\n\nexport default KeyCode;\n","import classNames from 'classnames';\nimport TileFill from 'constants/tileFill';\nimport { memo } from 'react';\n\nimport styles from './tile.module.scss';\n\nconst Tile = ({ fill }: { fill?: TileFill }) => (\n  <button\n    type=\"button\"\n    aria-label=\"tile\"\n    className={classNames(styles.tile, {\n      [styles.i]: fill === TileFill.I,\n      [styles.j]: fill === TileFill.J,\n      [styles.l]: fill === TileFill.L,\n      [styles.o]: fill === TileFill.O,\n      [styles.s]: fill === TileFill.S,\n      [styles.t]: fill === TileFill.T,\n      [styles.z]: fill === TileFill.Z,\n    })}\n  />\n);\n\nexport default memo(Tile);\n","import TileFill from 'constants/tileFill';\r\nimport { memo } from 'react';\r\n\r\nimport Tile from '../Tile';\r\nimport styles from './tiles.module.scss';\r\n\r\ninterface Props {\r\n  width: number;\r\n  tiles: { id: string; fill?: TileFill }[][];\r\n}\r\n\r\nconst Tiles = ({ width, tiles }: Props) => (\r\n  <div\r\n    data-testid={styles.tiles}\r\n    className={styles.tiles}\r\n    style={{ gridTemplateColumns: `repeat(${width}, 1fr)` }}\r\n  >\r\n    {tiles.map((row) =>\r\n      row.map(({ fill, id }) => <Tile fill={fill} key={id} />)\r\n    )}\r\n  </div>\r\n);\r\n\r\nexport default memo(Tiles);\r\n","// eslint-disable-next-line no-shadow\nenum MoveCode {\n  Rotation,\n  Left,\n  Right,\n  Down,\n}\n\nexport default MoveCode;\n","import { useEffect } from 'react';\n\nconst useDidMount = (callback: () => void) => {\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useEffect(callback, []);\n};\n\nexport default useDidMount;\n","import { nanoid } from 'nanoid';\n\nconst addId = <T extends Record<string, unknown>>(item: T) => ({\n  ...item,\n  id: nanoid(),\n});\n\nexport default addId;\n","import MoveCode from 'constants/moveCode';\n\nconst createMove = (code?: MoveCode) => {\n  switch (code) {\n    case MoveCode.Rotation:\n      return { isRotation: true };\n    case MoveCode.Left:\n      return { offset: { rowIndex: 0, columnIndex: -1 } };\n    case MoveCode.Right:\n      return { offset: { rowIndex: 0, columnIndex: 1 } };\n    case MoveCode.Down:\n    default:\n      return { isDown: true, offset: { rowIndex: 1, columnIndex: 0 } };\n  }\n};\n\nexport default createMove;\n","import produce, { Draft } from 'immer';\n\nconst rotateMatrix = <T>(matrix: T[][]) =>\n  produce(matrix, (draft) => {\n    draft.forEach((_, index) => {\n      // eslint-disable-next-line no-param-reassign\n      draft[index] = matrix.map((row) => row[index]) as Draft<T[]>;\n    });\n\n    draft.map((row) => row.reverse());\n  });\n\nexport default rotateMatrix;\n","import { useEffect, useRef } from 'react';\n\nconst useDidUpdate = (callback: () => void, ...deps: unknown[]) => {\n  const didMount = useRef(false);\n\n  useEffect(() => {\n    if (didMount.current) {\n      callback();\n    } else {\n      didMount.current = true;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, deps);\n};\n\nexport default useDidUpdate;\n","import { useEffect, useRef } from 'react';\n\nconst useInterval = (callback: () => void, interval?: number | null) => {\n  const callbackRef = useRef<typeof callback>();\n\n  useEffect(() => {\n    callbackRef.current = callback;\n  });\n\n  useEffect(() => {\n    if (!interval) {\n      return undefined;\n    }\n\n    const intervalId = setInterval(() => {\n      callbackRef.current?.();\n    }, interval);\n\n    return () => {\n      clearInterval(intervalId);\n    };\n  }, [interval]);\n};\n\nexport default useInterval;\n","import TileFill from './tileFill';\n\nconst tetrominos = [\n  [\n    [undefined, TileFill.I, undefined, undefined],\n    [undefined, TileFill.I, undefined, undefined],\n    [undefined, TileFill.I, undefined, undefined],\n    [undefined, TileFill.I, undefined, undefined],\n  ],\n  [\n    [undefined, TileFill.J, undefined],\n    [undefined, TileFill.J, undefined],\n    [TileFill.J, TileFill.J, undefined],\n  ],\n  [\n    [undefined, TileFill.L, undefined],\n    [undefined, TileFill.L, undefined],\n    [undefined, TileFill.L, TileFill.L],\n  ],\n  [\n    [TileFill.O, TileFill.O],\n    [TileFill.O, TileFill.O],\n  ],\n  [\n    [undefined, TileFill.S, TileFill.S],\n    [TileFill.S, TileFill.S, undefined],\n    [undefined, undefined, undefined],\n  ],\n  [\n    [undefined, TileFill.T, undefined],\n    [TileFill.T, TileFill.T, TileFill.T],\n    [undefined, undefined, undefined],\n  ],\n  [\n    [TileFill.Z, TileFill.Z, undefined],\n    [undefined, TileFill.Z, TileFill.Z],\n    [undefined, undefined, undefined],\n  ],\n];\n\nexport default tetrominos;\n","import tetrominos from 'constants/tetrominos';\nimport TileFill from 'constants/tileFill';\nimport produce from 'immer';\nimport { useState } from 'react';\nimport rotateMatrix from 'utils/rotateMatrix';\n\nconst useTetromino = ({ width }: TetrisParams) => {\n  const [tetromino, setTetromino] = useState<(TileFill | undefined)[][]>([]);\n\n  const [position, setPosition] = useState({ rowIndex: 0, columnIndex: 0 });\n\n  const randomize = () => {\n    const randomTetromino =\n      tetrominos[Math.floor(Math.random() * tetrominos.length)];\n\n    setTetromino(randomTetromino);\n    setPosition({\n      rowIndex: 0,\n      columnIndex: Math.floor((width - randomTetromino.length) / 2),\n    });\n  };\n\n  const makeMove = ({\n    isRotation,\n    offset = { rowIndex: 0, columnIndex: 0 },\n  }: Move) => {\n    if (isRotation) {\n      setTetromino(rotateMatrix(tetromino));\n    } else {\n      setPosition(\n        produce(position, (draft) => {\n          /* eslint-disable no-param-reassign */\n          draft.rowIndex += offset.rowIndex;\n          draft.columnIndex += offset.columnIndex;\n        })\n      );\n    }\n  };\n\n  return { tetromino, position, randomize, makeMove };\n};\n\nexport default useTetromino;\n","import TileFill from 'constants/tileFill';\r\nimport produce from 'immer';\r\nimport { useEffect, useMemo, useState } from 'react';\r\nimport addId from 'utils/addId';\r\nimport createMove from 'utils/createMove';\r\nimport rotateMatrix from 'utils/rotateMatrix';\r\n\r\nimport useDidUpdate from './useDidUpdate';\r\nimport useInterval from './useInterval';\r\nimport useTetromino from './useTetromino';\r\n\r\nconst useTetris = (params: TetrisParams) => {\r\n  const { width, height } = params;\r\n\r\n  const emptyTiles = useMemo(\r\n    () =>\r\n      Array.from({ length: height }, () =>\r\n        Array.from({ length: width }, () => addId({} as { fill?: TileFill }))\r\n      ),\r\n    [height, width]\r\n  );\r\n\r\n  const [tiles, setTiles] = useState(emptyTiles);\r\n\r\n  const [mergedTiles, setMergedTiles] = useState(emptyTiles);\r\n\r\n  const [clearedRowsCount, setClearedRowsCount] = useState(0);\r\n\r\n  const [score, setScore] = useState(0);\r\n\r\n  const [move, setMove] = useState<Move>({});\r\n\r\n  const [isAutoDrop, setIsAutoDrop] = useState(true);\r\n\r\n  const { tetromino, position, randomize, makeMove } = useTetromino(params);\r\n\r\n  const willTetrominoCollide = ({\r\n    matrix = tetromino,\r\n    offset = { rowIndex: 0, columnIndex: 0 },\r\n  }: { matrix?: typeof tetromino; offset?: Position } = {}) =>\r\n    matrix.some((row, rowIndex) =>\r\n      row.some((fill, columnIndex) => {\r\n        const rowIndexAhead = rowIndex + position.rowIndex + offset.rowIndex;\r\n        const columnIndexAhead =\r\n          columnIndex + position.columnIndex + offset.columnIndex;\r\n\r\n        return (\r\n          fill &&\r\n          (mergedTiles[rowIndexAhead]?.[columnIndexAhead]?.fill ||\r\n            rowIndexAhead >= height ||\r\n            columnIndexAhead >= width ||\r\n            columnIndexAhead < 0)\r\n        );\r\n      })\r\n    );\r\n\r\n  // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  useEffect(randomize, [mergedTiles]);\r\n\r\n  useDidUpdate(\r\n    () => {\r\n      if (willTetrominoCollide()) {\r\n        setTiles(emptyTiles);\r\n        setMergedTiles(emptyTiles);\r\n        setClearedRowsCount(0);\r\n      } else {\r\n        setTiles(\r\n          produce(mergedTiles, (draft) => {\r\n            tetromino.forEach((row, rowIndex) => {\r\n              row.forEach((fill, columnIndex) => {\r\n                if (fill) {\r\n                  /* eslint-disable no-param-reassign */\r\n                  draft[rowIndex + position.rowIndex][\r\n                    columnIndex + position.columnIndex\r\n                  ].fill = fill;\r\n                }\r\n              });\r\n            });\r\n          })\r\n        );\r\n      }\r\n    },\r\n    tetromino,\r\n    position\r\n  );\r\n\r\n  useDidUpdate(() => {\r\n    const willCollide = willTetrominoCollide(\r\n      move.isRotation ? { matrix: rotateMatrix(tetromino) } : move\r\n    );\r\n\r\n    if (willCollide && move.isDown) {\r\n      const filledRowsIndexes = tiles.reduce((indexes, row, index) => {\r\n        const hasEmptyTiles = row.some(({ fill }) => !fill);\r\n\r\n        if (!hasEmptyTiles) {\r\n          indexes.push(index);\r\n        }\r\n\r\n        return indexes;\r\n      }, [] as number[]);\r\n\r\n      const { length } = filledRowsIndexes;\r\n\r\n      if (length) {\r\n        setClearedRowsCount(clearedRowsCount + length);\r\n        setMergedTiles(\r\n          produce(tiles, (draft) => {\r\n            filledRowsIndexes.forEach((index) => {\r\n              for (let rowIndex = index; rowIndex; rowIndex -= 1) {\r\n                draft[rowIndex].forEach((tile, columnIndex) => {\r\n                  tile.fill = draft[rowIndex - 1][columnIndex].fill;\r\n                });\r\n              }\r\n            });\r\n          })\r\n        );\r\n      } else {\r\n        setMergedTiles(tiles);\r\n      }\r\n    } else if (!willCollide) {\r\n      makeMove(move);\r\n    }\r\n  }, move);\r\n\r\n  useDidUpdate(() => {\r\n    setScore(clearedRowsCount ? score + clearedRowsCount * 10 : 0);\r\n  }, clearedRowsCount);\r\n\r\n  useInterval(\r\n    () => {\r\n      setMove(createMove());\r\n    },\r\n    isAutoDrop ? 1e3 : null\r\n  );\r\n\r\n  return { tiles, score, setMove, setIsAutoDrop };\r\n};\r\n\r\nexport default useTetris;\r\n","import Counter from 'components/Counter';\r\nimport Footer from 'components/Footer';\r\nimport Header from 'components/Header';\r\nimport Tiles from 'components/Tiles';\r\nimport KeyCode from 'constants/keyCode';\r\nimport MoveCode from 'constants/moveCode';\r\nimport useDidMount from 'hooks/useDidMount';\r\nimport useTetris from 'hooks/useTetris';\r\nimport { KeyboardEvent, SyntheticEvent, useRef } from 'react';\r\nimport createMove from 'utils/createMove';\r\n\r\nimport styles from './tetris.module.scss';\r\n\r\nconst Tetris = (params: TetrisParams) => {\r\n  const { width } = params;\r\n\r\n  const containerRef = useRef<HTMLAnchorElement>(null);\r\n\r\n  const { tiles, score, setMove, setIsAutoDrop } = useTetris(params);\r\n\r\n  const handleClick = (event: SyntheticEvent<HTMLAnchorElement>) => {\r\n    event.preventDefault();\r\n  };\r\n\r\n  const handleKeyDown = ({ keyCode }: KeyboardEvent) => {\r\n    switch (keyCode) {\r\n      case KeyCode.ArrowUp:\r\n        setMove(createMove(MoveCode.Rotation));\r\n        break;\r\n      case KeyCode.ArrowLeft:\r\n        setMove(createMove(MoveCode.Left));\r\n        break;\r\n      case KeyCode.ArrowRight:\r\n        setMove(createMove(MoveCode.Right));\r\n        break;\r\n      case KeyCode.ArrowDown:\r\n      default:\r\n        setIsAutoDrop(false);\r\n        setMove(createMove());\r\n    }\r\n  };\r\n\r\n  const handleKeyUp = ({ keyCode }: KeyboardEvent) => {\r\n    if (keyCode === KeyCode.ArrowDown) {\r\n      setIsAutoDrop(true);\r\n    }\r\n  };\r\n\r\n  useDidMount(() => {\r\n    containerRef.current?.focus();\r\n  });\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <a\r\n        href=\"/\"\r\n        data-testid={styles.tetris}\r\n        className={styles.tetris}\r\n        ref={containerRef}\r\n        onClick={handleClick}\r\n        onKeyDown={handleKeyDown}\r\n        onKeyUp={handleKeyUp}\r\n      >\r\n        <Counter className={styles.score} count={score} />\r\n        <Tiles width={width} tiles={tiles} />\r\n      </a>\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Tetris;\r\n","import { library } from '@fortawesome/fontawesome-svg-core';\nimport { faGithub } from '@fortawesome/free-brands-svg-icons';\n\nconst setupIcons = () => {\n  library.add(faGithub);\n};\n\nexport default setupIcons;\n","import 'index.scss';\n\nimport Tetris from 'containers/Tetris';\nimport { StrictMode } from 'react';\nimport { render } from 'react-dom';\nimport setupIcons from 'setupIcons';\n\nsetupIcons();\n\nrender(\n  <StrictMode>\n    <Tetris width={10} height={20} />\n  </StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tile\":\"tile_tile__3mwM6\",\"i\":\"tile_i__25_aJ\",\"j\":\"tile_j__TNRBZ\",\"l\":\"tile_l__Zpgje\",\"o\":\"tile_o__2wu3P\",\"s\":\"tile_s__12WnI\",\"t\":\"tile_t__2_6li\",\"z\":\"tile_z__2vgfH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tetris\":\"tetris_tetris__1xn-2\",\"score\":\"tetris_score__XB5WE\"};"],"sourceRoot":""}