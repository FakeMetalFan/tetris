(this.webpackJsonptetris=this.webpackJsonptetris||[]).push([[0],{187:function(e,t,n){},188:function(e,t,n){},189:function(e,t,n){},190:function(e,t,n){"use strict";n.r(t);var r,c=n(0),o=n.n(c),i=n(70),a=(n(81),function(e){var t=e.state,n=e.columnsCount;return o.a.createElement("div",{className:"display",style:{gridTemplateColumns:"repeat(".concat(n,", 1fr)")}},t.map((function(e,t){return e.map((function(e,r){return o.a.createElement(oe,{key:r*n+t,state:e})}))})))}),u=n(28),s=(n(87),function(){return o.a.createElement("footer",null,o.a.createElement("span",null,"Powered by",o.a.createElement("a",{className:"icon",href:"https://github.com/FakeMetalFan",target:"_blank",rel:"noopener noreferrer"},o.a.createElement(u.a,{icon:["fab","github"]})),"\xa9",o.a.createElement("span",null,(new Date).getFullYear())))}),l=(n(88),function(){return o.a.createElement("header",null,o.a.createElement("span",{className:"title"},"Tetris"),o.a.createElement("a",{className:"icon",href:"https://github.com/FakeMetalFan/tetris",target:"_blank",rel:"noopener noreferrer"},o.a.createElement(u.a,{icon:["fab","github"]})))}),f=n(7),w=function(e){for(var t=Object(c.useRef)(!1),n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];Object(c.useEffect)((function(){t.current?e():t.current=!0}),r)},d=n(6),h=n(71),b=n.n(h),p=n(2),O=n(5),m=n(17),v=n(16),j=37,g=38,y=39,E=40,k=1,A=2,C=3,M=4,R=-1,x=1,S=2,_=3,D=4,N=5,F=6,I=7,P=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R;Object(p.a)(this,e),this[d.b]=!0,this.fill=t}return Object(O.a)(e,[{key:"isEmpty",get:function(){return this.fill===R}}]),e}(),z=n(30),J=n(191),T=n(72),K=n.n(T),U=function(e,t,n){var r=n.value;return n.value=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return K()(r.apply(this,t))},n},B=function(){function e(t){Object(p.a)(this,e),this._id=Object(J.a)(),this._code=t}return Object(O.a)(e,[{key:"isRotation",get:function(){return this._code===A}},{key:"isDown",get:function(){return this._code===M}}]),e}(),L=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(p.a)(this,e),this[d.b]=!0,this.rowAddress=t,this.colAddress=n},Y=(r=function(){function e(t){Object(p.a)(this,e),this.id=Object(J.a)(),this.position=new L,this.matrix=t}return Object(O.a)(e,[{key:"getCloned",value:function(e){return this.id=Object(J.a)(),this.position=new L(0,e),this}},{key:"getMoved",value:function(e){var t=e.rowAddress,n=void 0===t?0:t,r=e.colAddress,c=void 0===r?0:r;return this.position=Object(d.a)(this.position,(function(e){e.rowAddress+=n,e.colAddress+=c})),this}},{key:"getRotated",value:function(e){var t=this;return this.matrix=Object(d.a)(this.matrix,(function(n){n.forEach((function(e,r){n[r]=t.matrix.map((function(e){return e[r]}))})),e===q.Clockwise?n.map((function(e){return e.reverse()})):n.reverse()})),this}},{key:"width",get:function(){return this.matrix.length}},{key:"rowAddress",get:function(){return this.position.rowAddress}},{key:"colAddress",get:function(){return this.position.colAddress}}]),e}(),Object(z.a)(r.prototype,"getCloned",[U],Object.getOwnPropertyDescriptor(r.prototype,"getCloned"),r.prototype),Object(z.a)(r.prototype,"getMoved",[U],Object.getOwnPropertyDescriptor(r.prototype,"getMoved"),r.prototype),Object(z.a)(r.prototype,"getRotated",[U],Object.getOwnPropertyDescriptor(r.prototype,"getRotated"),r.prototype),r),Z=(new Map).set("I",new Y([[new P,new P(x),new P,new P],[new P,new P(x),new P,new P],[new P,new P(x),new P,new P],[new P,new P(x),new P,new P]])).set("J",new Y([[new P,new P(S),new P],[new P,new P(S),new P],[new P(S),new P(S),new P]])).set("L",new Y([[new P,new P(_),new P],[new P,new P(_),new P],[new P,new P(_),new P(_)]])).set("O",new Y([[new P(D),new P(D)],[new P(D),new P(D)]])).set("S",new Y([[new P,new P(N),new P(N)],[new P(N),new P(N),new P],[new P,new P,new P]])).set("T",new Y([[new P,new P(F),new P],[new P(F),new P(F),new P(F)],[new P,new P,new P]])).set("Z",new Y([[new P(I),new P(I),new P],[new P,new P(I),new P(I)],[new P,new P,new P]])),q={Clockwise:1,Counterclockwise:-1},G={colAddress:-1},H={colAddress:1},Q={rowAddress:1},V=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this,k)).offset=G,e}return Object(O.a)(n,[{key:"getOppositeMove",value:function(){return new X}}]),n}(B),W=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q.Clockwise;return Object(p.a)(this,n),(e=t.call(this,A)).direction=r,e}return Object(O.a)(n,[{key:"getOppositeMove",value:function(){return new n(q[this.direction===q.Clockwise?"Counterclockwise":"Clockwise"])}}]),n}(B),X=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this,C)).offset=H,e}return Object(O.a)(n,[{key:"getOppositeMove",value:function(){return new V}}]),n}(B),$=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this,M)).offset=Q,e}return n}(B),ee=function(e){var t=Object(c.useRef)(e),n=Object(c.useCallback)((function(e){t.current=e}),[]);return[t.current,n]},te=n(74),ne=function(e){var t=e.width,n=function(){var e=Object(te.a)(Z.keys()),n=Z.get(e[Math.random()*e.length|0]);return n.getCloned((t-n.width)/2|0)},r=Object(c.useState)((function(){return n()})),o=Object(f.a)(r,2),i=o[0],a=o[1];return{tetromino:i,randomize:function(){a(n())},makeMove:function(e){a(e.isRotation?i.getRotated(e.direction):i.getMoved(e.offset))}}},re=(n(187),function(){var e=Object(c.useState)(800),t=Object(f.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(0),u=Object(f.a)(i,2),s=u[0],l=u[1],h=Object(c.useState)(null),p=Object(f.a)(h,2),O=p[0],m=p[1],v=function(e){var t=e.width,n=e.height,r=e.move,o=Object(c.useMemo)((function(){return Array(t).fill(new P)}),[t]),i=Object(c.useMemo)((function(){return Array(n).fill(o)}),[o,n]),a=Object(c.useState)(i),u=Object(f.a)(a,2),s=u[0],l=u[1],h=Object(c.useState)(0),p=Object(f.a)(h,2),O=p[0],m=p[1],v=ne({width:t}),j=v.tetromino,g=v.randomize,y=v.makeMove,E=ee(s),k=Object(f.a)(E,2),A=k[0],C=k[1],M=function(){return j.matrix.some((function(e,r){return e.some((function(e,c){var o,i,a=e.isEmpty,u=r+j.rowAddress,s=c+j.colAddress;return!a&&(!(null===(o=A[u])||void 0===o||null===(i=o[s])||void 0===i?void 0:i.isEmpty)||u>=n||s>=t||s<0)}))}))};return Object(c.useEffect)((function(){M()?r.isDown?C(s):y(r.getOppositeMove()):l(Object(d.a)(A,(function(e){j.matrix.forEach((function(t,n){t.forEach((function(t,r){!t.isEmpty&&(e[n+j.rowAddress][r+j.colAddress]=t)}))}))})))}),[j.matrix,j.position]),w((function(){y(r)}),r),w((function(){g();var e=A.reduce((function(e,t,n){return!b()(t,"isEmpty")&&e.push(n),e}),[]);e.length&&(C(Object(d.a)(A,(function(t){e.forEach((function(e){t.splice(e,1),t.unshift(o)}))}))),m((function(t){return t+e.length})))}),A),w((function(){M()&&(l(i),C(i),m(0))}),j.id),{display:s,sweptRowsCount:O}}({width:10,move:O,height:20}),k=v.display,A=v.sweptRowsCount,C=Object(c.useRef)(),M=function(){m(new $)};return Object(c.useEffect)((function(){C.current.focus()}),[]),w((function(){l((function(e){return A?e+10*A:0}))}),A),function(e,t){var n=Object(c.useRef)();Object(c.useEffect)((function(){n.current=e}),[e]),Object(c.useEffect)((function(){if(t){var e=setInterval((function(){n.current()}),t);return function(){clearInterval(e)}}}),[t])}((function(){M()}),n),o.a.createElement("div",{className:"tetris",tabIndex:"0",onKeyDown:function(e){var t=e.keyCode;t===j&&m(new V),t===g&&m(new W),t===y&&m(new X),t===E&&(r(null),M())},onKeyUp:function(e){e.keyCode===E&&r(800)},ref:C},o.a.createElement("div",{className:"score"},s),o.a.createElement(a,{state:k,columnsCount:10}))}),ce=function(e){var t="tile tile__";switch(e){case R:return"".concat(t,"none");case x:return"".concat(t,"i");case S:return"".concat(t,"j");case _:return"".concat(t,"l");case D:return"".concat(t,"o");case N:return"".concat(t,"s");case F:return"".concat(t,"t");case I:return"".concat(t,"z");default:throw new Error('Unexpected tile fill of "'.concat(e,'"!'))}},oe=(n(188),Object(c.memo)((function(e){var t=e.state;return o.a.createElement("div",{className:ce(t.fill)})}))),ie=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(l,null),o.a.createElement(re,null),o.a.createElement(s,null))},ae=n(14),ue=n(73);n(189);ae.b.add(ue.a),Object(i.render)(o.a.createElement(c.StrictMode,null,o.a.createElement(ie,null)),document.getElementById("root"))},76:function(e,t,n){e.exports=n(190)},81:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){}},[[76,1,2]]]);
//# sourceMappingURL=main.9e226629.chunk.js.map